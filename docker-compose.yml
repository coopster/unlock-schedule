services:
  unlock-schedule:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        APP_VERSION: ${APP_VERSION:-dev}
    image: unlock-schedule:latest
    container_name: unlock-schedule
    ports:
      - "8000:8000"
    env_file:
      - .env
    environment:
      # Path inside the container to the JSON credential:
      GCAL_SERVICE_ACCOUNT_JSON: "/secrets/service-account.json"
    volumes:
      # Put your credentials file at ./secrets/service-account.json
      - ./secrets:/secrets:ro
    # Hardening that generally works on Synology
    read_only: true
    tmpfs:
      - /tmp
    restart: unless-stopped
